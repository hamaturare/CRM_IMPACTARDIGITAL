{% extends 'base_table.html' %}
{% load static %}
{% load crispy_forms_tags %} 
{% load lead_extras %}
{% block content %}
<div class="container-fluid mt-4"> <!-- Mudar de 'container' para 'container-fluid' para uso máximo de largura -->
    <h1>Leads</h1>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="thead-light">
                <tr>
                    <th><a href="?sort=first_name">Nome</a></th>
                    <th><a href="?sort=email">Email</a></th>
                    <th>Instagram</th>
                    <th>Website</th>
                    <th>WhatsApp</th>
                    <th><a href="?sort=created_at">Criado Em</a></th>
                    <th>Primeiro Contato</th>
                    <th><a href="?sort=Service Type">Tipo de Serviço</th>
                    <th><a href="?sort=priority">Prioridade</a></th>
                    <th><a href="?sort=id">ID</a></th>
                    <th>UPDATE</th>
                </tr>
            </thead>
            <tbody>
                {% for lead in leads %}
                <tr>
                    <td style="text-align: left;"><a href="#">{{ lead.first_name }} {{ lead.last_name }} </a></td>
                    <td>{{ lead.email }}</td>
                    <td>{{ lead.instagram|default_if_none:"Não Inf." }}</td>
                    <td>
                        {% if lead.website %}
                        <a href="{{ lead.website }}" target="_blank" class="text-primary"><i class="fas fa-link"></i> Visit</a>
                        {% else %}
                        Não Inf.
                        {% endif %}
                    </td>
                    <td>
                        {% if lead.whatsapp %}
                        <a href="https://wa.me/{{ lead.whatsapp }}" target="_blank" class="text-success"><i class="fab fa-whatsapp"></i> {{ lead.whatsapp|phone_format }}</a>
                        {% else %}
                        Não Inf.
                        {% endif %}
                    </td>
                    <td>{{ lead.created_at|date:"d/m/Y" }}</td>
                    <td>
                        {% if lead.first_contact_date %}
                        {{ lead.first_contact_date|date:"d/m/Y" }}
                        {% else %}
                        Sem Contato
                        {% endif %}
                    </td>
                    <td>{{ lead.service_type }}</td>
                    <td>{{ lead.priority }}</td>
                    <td>{{ lead.id }}</td>
                    <td><a href="#" class="btn btn-primary">Atualizar</a></td> <!-- Botão de atualizar -->
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
