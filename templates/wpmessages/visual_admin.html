<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Admin</title>
    <style>
        .balloon {
            position: absolute;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: move;
        }
        .option {
            margin-top: 5px;
            display: flex;
            align-items: center;
        }
        .option input {
            margin-right: 5px;
        }
        .add-option {
            margin-top: 10px;
            cursor: pointer;
            color: blue;
        }
    </style>
</head>
<body>
    <h1>Visual Admin</h1>
    <div id="container"></div>
    <button onclick="addQuestion()">Adicionar Pergunta</button>

    <script>
        let questionCounter = 0;
        let optionCounter = 0;

        function addQuestion() {
            const container = document.getElementById('container');
            const questionId = `question-${questionCounter++}`;

            const questionBalloon = document.createElement('div');
            questionBalloon.className = 'balloon';
            questionBalloon.id = questionId;
            questionBalloon.style.top = '50px';
            questionBalloon.style.left = '50px';

            const questionInput = document.createElement('input');
            questionInput.type = 'text';
            questionInput.placeholder = 'Digite a pergunta';

            const addOptionLink = document.createElement('div');
            addOptionLink.className = 'add-option';
            addOptionLink.innerText = 'Adicionar Opção';
            addOptionLink.onclick = () => addOption(questionId);

            questionBalloon.appendChild(questionInput);
            questionBalloon.appendChild(addOptionLink);
            container.appendChild(questionBalloon);

            makeDraggable(questionBalloon);
        }

        function addOption(questionId) {
            const questionBalloon = document.getElementById(questionId);
            const optionId = `option-${optionCounter++}`;

            const optionDiv = document.createElement('div');
            optionDiv.className = 'option';
            optionDiv.id = optionId;

            const optionInput = document.createElement('input');
            optionInput.type = 'text';
            optionInput.placeholder = 'Digite a opção';

            const nextStateInput = document.createElement('input');
            nextStateInput.type = 'text';
            nextStateInput.placeholder = 'Próximo estado';

            optionDiv.appendChild(optionInput);
            optionDiv.appendChild(nextStateInput);
            questionBalloon.appendChild(optionDiv);
        }

        function makeDraggable(element) {
            let isDragging = false;
            let offsetX, offsetY;

            element.onmousedown = function (e) {
                isDragging = true;
                offsetX = e.clientX - parseInt(element.style.left);
                offsetY = e.clientY - parseInt(element.style.top);
                document.onmousemove = onMouseMove;
                document.onmouseup = onMouseUp;
            };

            function onMouseMove(e) {
                if (isDragging) {
                    element.style.left = (e.clientX - offsetX) + 'px';
                    element.style.top = (e.clientY - offsetY) + 'px';
                }
            }

            function onMouseUp() {
                isDragging = false;
                document.onmousemove = null;
                document.onmouseup = null;
            }
        }
    </script>
</body>
</html>
